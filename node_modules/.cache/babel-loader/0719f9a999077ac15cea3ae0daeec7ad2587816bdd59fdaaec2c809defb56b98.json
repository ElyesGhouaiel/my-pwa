{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./App.css';import{initializeApp}from'firebase/app';import{getMessaging,getToken,onMessage}from'firebase/messaging';// Configuration Firebase\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyDLu_SNw66YIVs8ruwMGwxnv1DDcxuzbKQ\",authDomain:\"test-1ed88.firebaseapp.com\",projectId:\"test-1ed88\",storageBucket:\"test-1ed88.firebasestorage.app\",messagingSenderId:\"240250228794\",appId:\"1:240250228794:web:ddef4fee8b65752e5d6503\",measurementId:\"G-NCX2XWPCS9\"};// Initialisation de Firebase\nconst app=initializeApp(firebaseConfig);const messaging=getMessaging(app);function App(){const[notification,setNotification]=useState({title:'',body:''});const requestPermission=async()=>{const permission=await Notification.requestPermission();if(permission==='granted'){// Obtention du token FCM\nconst token=await getToken(messaging,{vapidKey:'BGLtKcFy9_L33rRIg6qksP9Ux0R6oUOsyWWOx1FbG6XF6EZbn46HE55Aq4cFH1rQTWsS4JxuXglwa1pPbJ3DOgo'});console.log('Token FCM:',token);// Ici, vous devriez envoyer ce token à votre serveur pour l'enregistrer\n}else{console.log('Permission refusée');}};useEffect(()=>{requestPermission();// Gestion des messages reçus lorsque l'app est au premier plan\nconst unsubscribe=onMessage(messaging,payload=>{console.log('Message reçu:',payload);setNotification({title:payload.notification.title,body:payload.notification.body});});return()=>{unsubscribe();// Nettoyage de l'écouteur lors du démontage du composant\n};},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Ma PWA React avec Notifications Push\"}),/*#__PURE__*/_jsx(\"button\",{onClick:requestPermission,children:\"Demander la permission pour les notifications\"}),notification.title&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Derni\\xE8re notification :\"}),/*#__PURE__*/_jsx(\"p\",{children:notification.title}),/*#__PURE__*/_jsx(\"p\",{children:notification.body})]})]})});}export default App;","map":{"version":3,"names":["React","useEffect","useState","initializeApp","getMessaging","getToken","onMessage","jsx","_jsx","jsxs","_jsxs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","messaging","App","notification","setNotification","title","body","requestPermission","permission","Notification","token","vapidKey","console","log","unsubscribe","payload","className","children","onClick"],"sources":["C:/Users/yujir/Documents/ynov/app pwa/my-pwa/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { initializeApp } from 'firebase/app';\nimport { getMessaging, getToken, onMessage } from 'firebase/messaging';\n\n// Configuration Firebase\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDLu_SNw66YIVs8ruwMGwxnv1DDcxuzbKQ\",\n  authDomain: \"test-1ed88.firebaseapp.com\",\n  projectId: \"test-1ed88\",\n  storageBucket: \"test-1ed88.firebasestorage.app\",\n  messagingSenderId: \"240250228794\",\n  appId: \"1:240250228794:web:ddef4fee8b65752e5d6503\",\n  measurementId: \"G-NCX2XWPCS9\"\n};\n// Initialisation de Firebase\nconst app = initializeApp(firebaseConfig);\nconst messaging = getMessaging(app);\n\nfunction App() {\n  const [notification, setNotification] = useState({title: '', body: ''});\n\n  const requestPermission = async () => {\n    const permission = await Notification.requestPermission();\n    if (permission === 'granted') {\n      // Obtention du token FCM\n      const token = await getToken(messaging, { vapidKey: 'BGLtKcFy9_L33rRIg6qksP9Ux0R6oUOsyWWOx1FbG6XF6EZbn46HE55Aq4cFH1rQTWsS4JxuXglwa1pPbJ3DOgo' });\n      console.log('Token FCM:', token);\n      // Ici, vous devriez envoyer ce token à votre serveur pour l'enregistrer\n    } else {\n      console.log('Permission refusée');\n    }\n  };\n\n  useEffect(() => {\n    requestPermission();\n\n    // Gestion des messages reçus lorsque l'app est au premier plan\n    const unsubscribe = onMessage(messaging, (payload) => {\n      console.log('Message reçu:', payload);\n      setNotification({\n        title: payload.notification.title,\n        body: payload.notification.body\n      });\n    });\n\n    return () => {\n      unsubscribe(); // Nettoyage de l'écouteur lors du démontage du composant\n    };\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>Ma PWA React avec Notifications Push</h1>\n        <button onClick={requestPermission}>Demander la permission pour les notifications</button>\n        {notification.title && (\n          <div>\n            <h2>Dernière notification :</h2>\n            <p>{notification.title}</p>\n            <p>{notification.body}</p>\n          </div>\n        )}\n      </header>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,WAAW,CAClB,OAASC,aAAa,KAAQ,cAAc,CAC5C,OAASC,YAAY,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,oBAAoB,CAEtE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,cAAc,CAAG,CACrBC,MAAM,CAAE,yCAAyC,CACjDC,UAAU,CAAE,4BAA4B,CACxCC,SAAS,CAAE,YAAY,CACvBC,aAAa,CAAE,gCAAgC,CAC/CC,iBAAiB,CAAE,cAAc,CACjCC,KAAK,CAAE,2CAA2C,CAClDC,aAAa,CAAE,cACjB,CAAC,CACD;AACA,KAAM,CAAAC,GAAG,CAAGhB,aAAa,CAACQ,cAAc,CAAC,CACzC,KAAM,CAAAS,SAAS,CAAGhB,YAAY,CAACe,GAAG,CAAC,CAEnC,QAAS,CAAAE,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,YAAY,CAAEC,eAAe,CAAC,CAAGrB,QAAQ,CAAC,CAACsB,KAAK,CAAE,EAAE,CAAEC,IAAI,CAAE,EAAE,CAAC,CAAC,CAEvE,KAAM,CAAAC,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,KAAM,CAAAC,UAAU,CAAG,KAAM,CAAAC,YAAY,CAACF,iBAAiB,CAAC,CAAC,CACzD,GAAIC,UAAU,GAAK,SAAS,CAAE,CAC5B;AACA,KAAM,CAAAE,KAAK,CAAG,KAAM,CAAAxB,QAAQ,CAACe,SAAS,CAAE,CAAEU,QAAQ,CAAE,yFAA0F,CAAC,CAAC,CAChJC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAEH,KAAK,CAAC,CAChC;AACF,CAAC,IAAM,CACLE,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACnC,CACF,CAAC,CAED/B,SAAS,CAAC,IAAM,CACdyB,iBAAiB,CAAC,CAAC,CAEnB;AACA,KAAM,CAAAO,WAAW,CAAG3B,SAAS,CAACc,SAAS,CAAGc,OAAO,EAAK,CACpDH,OAAO,CAACC,GAAG,CAAC,eAAe,CAAEE,OAAO,CAAC,CACrCX,eAAe,CAAC,CACdC,KAAK,CAAEU,OAAO,CAACZ,YAAY,CAACE,KAAK,CACjCC,IAAI,CAAES,OAAO,CAACZ,YAAY,CAACG,IAC7B,CAAC,CAAC,CACJ,CAAC,CAAC,CAEF,MAAO,IAAM,CACXQ,WAAW,CAAC,CAAC,CAAE;AACjB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEzB,IAAA,QAAK2B,SAAS,CAAC,KAAK,CAAAC,QAAA,cAClB1B,KAAA,WAAQyB,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC5B5B,IAAA,OAAA4B,QAAA,CAAI,sCAAoC,CAAI,CAAC,cAC7C5B,IAAA,WAAQ6B,OAAO,CAAEX,iBAAkB,CAAAU,QAAA,CAAC,+CAA6C,CAAQ,CAAC,CACzFd,YAAY,CAACE,KAAK,eACjBd,KAAA,QAAA0B,QAAA,eACE5B,IAAA,OAAA4B,QAAA,CAAI,4BAAuB,CAAI,CAAC,cAChC5B,IAAA,MAAA4B,QAAA,CAAId,YAAY,CAACE,KAAK,CAAI,CAAC,cAC3BhB,IAAA,MAAA4B,QAAA,CAAId,YAAY,CAACG,IAAI,CAAI,CAAC,EACvB,CACN,EACK,CAAC,CACN,CAAC,CAEV,CAEA,cAAe,CAAAJ,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}